import React from 'react';
import { useMenu } from "../../context/MenuContext";
import { useTheme } from "../../context/ThemeContext";
import { useTranslation } from 'react-i18next';
import { Box, Typography, Paper, Grid, Switch, FormControlLabel, Divider } from '@mui/material';

const Settings = () => {
    const { isMinimized } = useMenu();
    const { isDarkMode, toggleTheme } = useTheme();
    const { t, i18n } = useTranslation();

    const changeLanguage = (lng) => {
        i18n.changeLanguage(lng);
    };

    return (
        <Box className={`settings-container ${isMinimized ? 'minimized' : ''} ${isDarkMode ? 'dark-mode' : 'light-mode'}`}
            sx={{
                padding: '2rem',
                transition: 'all 0.3s cubic-bezier(0.4, 0, 0.2, 1)',
                marginLeft: isMinimized ? '5rem' : '250px',
                width: isMinimized ? 'calc(100% - 5rem)' : 'calc(100% - 250px)',
                minHeight: '100vh',
                position: 'absolute',
                top: 0,
                right: 0,
                overflowY: 'auto',
                backgroundColor: isDarkMode ? '#121212' : '#f5f7ff',
                color: isDarkMode ? '#e0e0e0' : '#6b7a99',
                '@media (max-width: 768px)': {
                    marginLeft: '0',
                    width: '100%',
                    padding: '1.5rem'
                }
            }}
        >
            <Typography variant="h4" component="h1" sx={{ 
                mb: 4, 
                fontWeight: 700, 
                color: isDarkMode ? '#ffffff' : '#3968d0',
                borderBottom: `2px solid ${isDarkMode ? '#333' : '#e0e7ff'}`,
                paddingBottom: '1rem'
            }}>
                {t('settings.title', 'Settings')}
            </Typography>

            <Grid container spacing={3}>
                <Grid item xs={12} md={6}>
                    <Paper elevation={isDarkMode ? 2 : 1} sx={{ 
                        p: 3, 
                        borderRadius: '12px',
                        backgroundColor: isDarkMode ? '#1e1e1e' : 'white',
                        mb: 3
                    }}>
                        <Typography variant="h6" sx={{ 
                            mb: 2, 
                            color: isDarkMode ? '#fff' : '#3968d0',
                            fontWeight: 600
                        }}>
                            {t('settings.appearance', 'Appearance')}
                        </Typography>
                        <FormControlLabel
                            control={
                                <Switch 
                                    checked={isDarkMode}
                                    onChange={toggleTheme}
                                    color="primary"
                                />
                            }
                            label={isDarkMode ? t('settings.darkMode', 'Dark Mode') : t('settings.lightMode', 'Light Mode')}
                            sx={{ mb: 2 }}
                        />
                        
                        <Divider sx={{ my: 2 }} />
                        
                        <Typography variant="h6" sx={{ 
                            mb: 2, 
                            color: isDarkMode ? '#fff' : '#3968d0',
                            fontWeight: 600
                        }}>
                            {t('settings.language', 'Language')}
                        </Typography>
                        
                        <Grid container spacing={2}>
                            <Grid item>
                                <Paper 
                                    elevation={0} 
                                    sx={{ 
                                        p: 2, 
                                        cursor: 'pointer',
                                        border: i18n.language === 'en' ? `2px solid ${isDarkMode ? '#7c3aed' : '#4f46e5'}` : `1px solid ${isDarkMode ? '#333' : '#e5e7eb'}`,
                                        borderRadius: '8px',
                                        backgroundColor: i18n.language === 'en' ? (isDarkMode ? 'rgba(124, 58, 237, 0.1)' : 'rgba(79, 70, 229, 0.05)') : 'transparent'
                                    }}
                                    onClick={() => changeLanguage('en')}
                                >
                                    <Typography sx={{ fontWeight: i18n.language === 'en' ? 700 : 400 }}>English</Typography>
                                </Paper>
                            </Grid>
                            <Grid item>
                                <Paper 
                                    elevation={0} 
                                    sx={{ 
                                        p: 2, 
                                        cursor: 'pointer',
                                        border: i18n.language === 'fr' ? `2px solid ${isDarkMode ? '#7c3aed' : '#4f46e5'}` : `1px solid ${isDarkMode ? '#333' : '#e5e7eb'}`,
                                        borderRadius: '8px',
                                        backgroundColor: i18n.language === 'fr' ? (isDarkMode ? 'rgba(124, 58, 237, 0.1)' : 'rgba(79, 70, 229, 0.05)') : 'transparent'
                                    }}
                                    onClick={() => changeLanguage('fr')}
                                >
                                    <Typography sx={{ fontWeight: i18n.language === 'fr' ? 700 : 400 }}>Français</Typography>
                                </Paper>
                            </Grid>
                        </Grid>
                    </Paper>
                </Grid>
                
                <Grid item xs={12} md={6}>
                    <Paper elevation={isDarkMode ? 2 : 1} sx={{ 
                        p: 3, 
                        borderRadius: '12px',
                        backgroundColor: isDarkMode ? '#1e1e1e' : 'white'
                    }}>
                        <Typography variant="h6" sx={{ 
                            mb: 2, 
                            color: isDarkMode ? '#fff' : '#3968d0',
                            fontWeight: 600
                        }}>
                            {t('settings.about', 'About')}
                        </Typography>
                        
                        <Typography variant="body1" paragraph>
                            {t('settings.appVersion', 'Application Version')}: 1.0.0
                        </Typography>
                        
                        <Typography variant="body1" paragraph>
                            {t('settings.appDescription', 'Titrit Technologies is a comprehensive token management platform designed for secure digital transactions and administration.')}
                        </Typography>
                        
                        <Typography variant="body2" sx={{ mt: 2, color: isDarkMode ? '#aaa' : '#666' }}>
                            © {new Date().getFullYear()} Titrit Technologies. {t('settings.allRightsReserved', 'All rights reserved')}.
                        </Typography>
                    </Paper>
                </Grid>
            </Grid>
        </Box>
    );
};

export default Settings; 